<!-- 自定义导航栏 -->
<view class="nav-bar">
  <view class="nav-status-bar" style="height: {{statusBarHeight}}px;"></view>
  <view class="nav-title-area">
    <view class="nav-back" bindtap="goBack">
      <t-icon name="chevron-left" size="20" color="#fff" />
    </view>
    <view class="nav-title">新建活动</view>
  </view>
</view>

<!-- 滚动内容区域 -->
<scroll-view
  class="create-scroll-wrapper"
  style="height: calc(100vh - {{statusBarHeight + 44}}px - 130rpx); top: {{statusBarHeight + 44}}px;"
  scroll-y
>
  <view class="create-page">
    <view class="form-container">

    <!-- 活动名称 -->
    <view class="form-item">
      <view class="form-label required">活动名称</view>
      <t-input
        placeholder="请输入活动名称"
        value="{{title}}"
        bind:change="onTitleChange"
        maxlength="50"
      />
    </view>

    <!-- 活动描述 -->
    <view class="form-item">
      <view class="form-label">活动描述</view>
      <t-textarea
        placeholder="记录一下这次活动的美好回忆..."
        value="{{description}}"
        bind:change="onDescriptionChange"
        maxlength="500"
        autosize
      />
    </view>

    <!-- 日期时间 -->
    <view class="form-item-row">
      <view class="form-item-half">
        <view class="form-label required">日期</view>
        <picker
          mode="date"
          value="{{date}}"
          bindchange="onDateChange"
        >
          <view class="picker-value">
            {{date || '请选择日期'}}
          </view>
        </picker>
      </view>
      <view class="form-item-half">
        <view class="form-label">时间</view>
        <picker
          mode="time"
          value="{{time}}"
          bindchange="onTimeChange"
        >
          <view class="picker-value">
            {{time || '请选择时间'}}
          </view>
        </picker>
      </view>
    </view>

    <!-- 地点 -->
    <view class="form-item">
      <view class="form-label">地点</view>
      <t-input
        placeholder="在哪里度过这段时光？"
        value="{{location}}"
        bind:change="onLocationChange"
        maxlength="100"
      />
    </view>

    <!-- 图片上传 -->
    <view class="form-item">
      <view class="form-label required">活动照片</view>
      <t-upload
        mediaType="{{['image']}}"
        max="{{9}}"
        gridConfig="{{uploadGridConfig}}"
        value="{{images}}"
        bind:change="onUploadChange"
      />
      <view class="form-tip">最多上传9张照片</view>
    </view>

    <!-- 参与人员 -->
    <view class="form-item">
      <view class="form-label">参与人员</view>
      <view class="participants-input">
        <t-input
          placeholder="输入姓名后点击添加"
          value="{{participantInput}}"
          bind:change="onParticipantInput"
          confirmType="done"
          bindconfirm="onAddParticipant"
        />
        <t-button size="small" variant="outline" bindtap="onAddParticipant" class="add-btn">添加</t-button>
      </view>
      <view class="participants-list" wx:if="{{participants.length > 0}}">
        <t-tag
          wx:for="{{participants}}"
          wx:key="index"
          variant="light"
          closable
          bindclose="onRemoveParticipant"
          data-index="{{index}}"
          class="participant-tag"
        >
          {{item}}
        </t-tag>
      </view>
    </view>

  </view>
  </view>
</scroll-view>

<!-- 底部提交按钮 -->
  <view class="submit-bar">
    <t-button
      theme="primary"
      size="large"
      bindtap="onSubmit"
      loading="{{submitting}}"
      disabled="{{submitting}}"
      block
    >
      发布记录
    </t-button>
  </view>